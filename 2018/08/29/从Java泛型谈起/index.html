<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>从Java泛型谈起 | 飞翔的傻瓜</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">从Java泛型谈起</h1><a id="logo" href="/.">飞翔的傻瓜</a><p class="description">菜鸟的试飞之旅</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">从Java泛型谈起</h1><div class="post-meta">Aug 29, 2018</div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#泛型的好处"><span class="toc-number">1.</span> <span class="toc-text">泛型的好处</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类型擦除"><span class="toc-number">2.</span> <span class="toc-text">类型擦除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#精确的泛型"><span class="toc-number">3.</span> <span class="toc-text">精确的泛型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#泛型类与泛型方法"><span class="toc-number">3.1.</span> <span class="toc-text">泛型类与泛型方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#再加点限制-super-amp-extends"><span class="toc-number">3.2.</span> <span class="toc-text">再加点限制: super &amp; extends</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#精确泛型满足不了的场景"><span class="toc-number">4.</span> <span class="toc-text">精确泛型满足不了的场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#当泛型遇到了继承的场景"><span class="toc-number">4.1.</span> <span class="toc-text">当泛型遇到了继承的场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通配符"><span class="toc-number">5.</span> <span class="toc-text">通配符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#的使用"><span class="toc-number">5.1.</span> <span class="toc-text">? 的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#extends-amp-super"><span class="toc-number">5.2.</span> <span class="toc-text">extends &amp; super</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#泛型方法"><span class="toc-number">5.3.</span> <span class="toc-text">泛型方法</span></a></li></ol></li></ol></div></div><div class="post-content"><h2 id="泛型的好处"><a href="#泛型的好处" class="headerlink" title="泛型的好处"></a>泛型的好处</h2><p>在泛型出现之前，要想实现一个类型通用的实现必须要使用Object，而Object本身就是所有对象的父类，这就难免会由于类型检查的缺乏而影响程序本身。这些规范完全依赖于程序员的自律。这个时候如果既能保留C++泛型能创建通用代码的特性，又能对类型做到一定的检查就好了，而Java泛型应运而生，需要注意的是，Java语言是本身能够实现通用代码的编写的，而现在只需要对类型做一些限制，这和C++的泛型的思想有很大的不同，这就导致了Java的泛型采用了类型擦除的思路。</p>
<h2 id="类型擦除"><a href="#类型擦除" class="headerlink" title="类型擦除"></a>类型擦除</h2><p>与C++语言每次根据传入类型生成代码的“膨胀”法不同，Java使用了类型擦除机制来实现泛型，本质上还是Object，只不过就是增加了编译器检查，正因为如此，可以总结如下两个特性：</p>
<ul>
<li>所写的泛型代码在最后都被擦除成Object</li>
<li>泛型可以不写强制转换的原因是编译的时候编译器加了自动的转型</li>
</ul>
<h2 id="精确的泛型"><a href="#精确的泛型" class="headerlink" title="精确的泛型"></a>精确的泛型</h2><h3 id="泛型类与泛型方法"><a href="#泛型类与泛型方法" class="headerlink" title="泛型类与泛型方法"></a>泛型类与泛型方法</h3><p>总之就是一个<code>&lt;T&gt;</code>里面填写具体的泛型参数的表示,在类上申明就是泛型类，在方法上申明就是泛型方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//泛型类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractDao</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//泛型方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tools</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">copyOf</span><span class="params">(T ori)</span></span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当一个类被实例化参数话之后，T全部变成了具体的类型</p>
<h3 id="再加点限制-super-amp-extends"><a href="#再加点限制-super-amp-extends" class="headerlink" title="再加点限制: super &amp; extends"></a>再加点限制: super &amp; extends</h3><p>泛型类或者泛型方法中的泛型逻辑需要利用一些特殊的类，例如需要某接口实现的方法等等，这个时候需要对这样一个具体的类进行限制，这种限制分为两种，上界和下界</p>
<ul>
<li><p>extends</p>
<ul>
<li><p>例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Comparable&gt; <span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] array)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>extends指定了上界，传入的元素会检查是否是Comparable的子类</p>
</li>
</ul>
</li>
<li><p>super</p>
<ul>
<li>super指定上界。</li>
</ul>
</li>
</ul>
<h2 id="精确泛型满足不了的场景"><a href="#精确泛型满足不了的场景" class="headerlink" title="精确泛型满足不了的场景"></a>精确泛型满足不了的场景</h2><p>这写情况发生再泛型参数赋值的情景。</p>
<p>我们上面讨论的都是精确的泛型，“精确的泛型”是我根据自己理解来描述的，它满足不了不需要精确泛型的应用场景：下面用码农翻身公众号的例子来说明：</p>
<h3 id="当泛型遇到了继承的场景"><a href="#当泛型遇到了继承的场景" class="headerlink" title="当泛型遇到了继承的场景"></a>当泛型遇到了继承的场景</h3><p><img src="从Java泛型谈起/1.png" alt="类图"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(ArrayList&lt;Fruit&gt; list)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(Fruit e:list)&#123;</span><br><span class="line">        System.out.println(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ArrayList&lt;Apple&gt; list = <span class="keyword">new</span> ArrayList&lt;Apple&gt;();</span><br><span class="line">list.add(<span class="keyword">new</span> Apple());</span><br><span class="line">list.add(<span class="keyword">new</span> Apple());</span><br><span class="line"></span><br><span class="line">print(list)<span class="comment">//编译错误</span></span><br></pre></td></tr></table></figure>
<p>为什么会出现这个问题，说到底就是传入的参数类型不符，我们想要去做到一个不精确的匹配，为了达到这个目的，Java引入了通配符<code>?</code> </p>
<h2 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h2><p>Java引入的通配符来满足不精确匹配的场景，刚才由于<code>List&lt;Fruit&gt;</code>和<code>List&lt;Apple&gt;</code>是两个完全不同的类型，因此编译失败，两个不同的类型是不能直接赋值的，虽然<strong>里面的成分</strong>有继承关系。为了解决这个问题，引入了通配符，通配符就表示这个泛型实例的类型是未知的，那么，完成下面的赋值操作就是再正常不过的了：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;?&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">List&lt;?&gt; list = <span class="keyword">new</span> ArrayList&lt;Double&gt;();</span><br></pre></td></tr></table></figure>
<h3 id="的使用"><a href="#的使用" class="headerlink" title="? 的使用"></a>? 的使用</h3><p>简单的说，？的使用场景</p>
<h3 id="extends-amp-super"><a href="#extends-amp-super" class="headerlink" title="extends &amp; super"></a>extends &amp; super</h3><blockquote>
<p><a href="https://segmentfault.com/a/1190000008423240#articleHeader0" target="_blank" rel="noopener">https://segmentfault.com/a/1190000008423240#articleHeader0</a></p>
</blockquote>
<h3 id="泛型方法"><a href="#泛型方法" class="headerlink" title="泛型方法"></a>泛型方法</h3><blockquote>
<p><a href="https://www.cnblogs.com/shadowdoor/p/6817346.html" target="_blank" rel="noopener">https://www.cnblogs.com/shadowdoor/p/6817346.html</a></p>
<p><a href="http://www.cnblogs.com/iyangyuan/archive/2013/04/09/3011274.html" target="_blank" rel="noopener">http://www.cnblogs.com/iyangyuan/archive/2013/04/09/3011274.html</a></p>
<p><a href="https://blog.csdn.net/u010884123/article/details/78189395" target="_blank" rel="noopener">https://blog.csdn.net/u010884123/article/details/78189395</a></p>
</blockquote>
</div><iframe src="/donate/?AliPayQR=/img/AliPayQRA.png&amp;WeChatQR=/img/WeChatQRA.png&amp;GitHub=null&amp;BTCQR=null&amp;BTCKEY=null&amp;PayPal=null" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;" frameborder="0" scrolling="no"></iframe><div class="tags"><a href="/tags/Java/">Java</a></div><div class="post-nav"><a class="pre" href="/2018/08/29/JDBC设计思想/">JDBC设计思想</a><a class="next" href="/2018/08/17/ProtectMod/">保护模式笔记</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Java-Servlet/" style="font-size: 15px;">Java Servlet</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/反射/" style="font-size: 15px;">反射</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/jdbc/" style="font-size: 15px;">jdbc</a> <a href="/tags/操作系统/" style="font-size: 15px;">操作系统</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/注解/" style="font-size: 15px;">注解</a> <a href="/tags/保护模式/" style="font-size: 15px;">保护模式</a> <a href="/tags/ClassLoader/" style="font-size: 15px;">ClassLoader</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Windows/" style="font-size: 15px;">Windows</a> <a href="/tags/设计模式-动态代理/" style="font-size: 15px;">设计模式 动态代理</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/栈-队列-算法/" style="font-size: 15px;">栈 队列 算法</a> <a href="/tags/设计模式-策略模式/" style="font-size: 15px;">设计模式 策略模式</a> <a href="/tags/设计模式-观察者模式/" style="font-size: 15px;">设计模式 观察者模式</a> <a href="/tags/算法-递归/" style="font-size: 15px;">算法 递归</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/09/10/Git/">Git 学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/10/js2/">蛋疼的JavaScript(二)this</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/29/JDBC设计思想/">JDBC设计思想</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/29/从Java泛型谈起/">从Java泛型谈起</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/17/ProtectMod/">保护模式笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/16/struts2-1/">struts2杂记（一）入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/05/ClassLoader总结/">ClassLoader总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/01/js-1/">蛋疼的JavaScript(一)：作用域与闭包</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/29/Java验证码图片创建/">Java验证码图片创建</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/29/动态规划入门/">动态规划入门</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.guozw.xin/" title="GuoZW的博客" target="_blank">GuoZW的博客</a><ul></ul><a href="http://codermiya.com/" title="Miyang的博客" target="_blank">Miyang的博客</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">飞翔的傻瓜.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>